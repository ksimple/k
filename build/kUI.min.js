define("kUI",["require","exports","kFundamental","jquery","jquery.migrate"],function(a,b,c,d){function e(){return window.performance&&window.performance.now?Math.floor(window.performance.now())+"-"+Math.floor(1e4*Math.random()):(new Date).valueOf()+"-"+Math.floor(1e4*Math.random())}function f(a){var b=a.match(/(\d*)(.*)/).slice(1),c=b[0],d=b[1];return c=parseInt(c),[c,d]}function g(a,b){b?l[a]=b:delete l[a];var c="";for(var a in l)c+=l[a];m.content(c)}function h(){d(document.body).k("layout")}function i(a){if(a){var b=new c.CssTextBuilder;b.pushSelector("html, body"),b.property("position","absolute"),b.property("width","100%"),b.property("height","100%"),b.property("border","0px"),b.property("margin",0,"px"),b.property("padding",0,"px"),g("body",b.toString()),d(window).on("resize",h)}else g("body"),d(window).off("resize",h)}function j(a){a=d(a).eq(0),(a[0]==window||a[0]==document)&&(a=d(document.body));var b=a.find("[k-type]");a.attr("k-type")&&(b=d(a).add(b));for(var c=0;c<b.length;c++){var e=b.eq(c);if(!e[0]["k-item"])switch(e.attr("k-type")){case"stack":e[0]["k-item"]=new k(e,e.attr("k-options"))}}}var k=function(){function a(a,b){this._direction=b,this._element=a,this._classSelectorName="k-ui-stack-"+e(),this._className="k-ui k-ui-stack "+this._classSelectorName,this._element.addClass(this._className),"vertical"==this._direction?(this._offsetName="top",this._offsetName="top",this._lengthName="height",this._quadratureLengthName="width"):(this._offsetName="left",this._lengthName="width",this._quadratureLengthName="height"),"BODY"==this._element[0].tagName&&i(!0),this.layout(!0)}return a.prototype.layout=function(a){void 0===a&&(a=!1),d.browser.msie&&d.browser.version<9?this._layoutByJavascript(a):this._layoutByCssCalc(a)},a.prototype._layoutByCssCalc=function(a){var b=this._element.width(),d=this._element.height(),e=this._width!=b||this._height!=d;if(a||!e){for(var h=this._element.find(">div"),i=new c.CssTextBuilder,j=[],k="",l="",m=0,n=!1,o=0;o<h.length;o++){var p=h.eq(o),q=p.attr("k-ui-stack-"+this._lengthName),r=f(q),s=r[0],t=r[1],u={raw:q,index:o,length:s,unit:t,css:{}};if(j.push(u),"?"==q){if(!n){var v=new c.CssTextBuilder;v.pushSelector("."+this._classSelectorName),v.property("position","relative"),v.pushSelector("."+this._classSelectorName+">*"),v.property("position","absolute"),g(this._classSelectorName,v.toString()),n=!0}var w;p.css("position","relative"),"vertical"==this._direction?w=p[this._lengthName]():(p.css("display","inline-block"),w=p[this._lengthName](),p.css("display","")),p.css("position",""),u.length=w,u.unit="px",k+=""==k?u.length+u.unit:" + "+u.length+u.unit,l+=""==l?u.length+u.unit:" + "+u.length+u.unit}else("px"==u.unit||"%"==u.unit)&&(k+=""==k?u.length+u.unit:" + "+u.length+u.unit,"%"!=u.unit?l+=""==l?u.length+u.unit:" + "+u.length+u.unit:m+=u.length)}for(var x="0px",o=0;o<h.length;o++){var u=j[o];u.css.offset="calc("+x+")","*"==u.raw?(x+=" + (100% - ("+k+"))",u.css.length="calc(100% - ("+k+"))"):"px"==u.unit||"%"==u.unit?(x+=" + "+u.length+u.unit,u.css.length="calc("+u.length+u.unit+")"):"%*"==u.unit&&(x+=" + (100% - ("+k+")) * "+u.length+" / 100",u.css.length="calc((100% - ("+k+")) * "+u.length+" / 100)")}if(JSON.stringify(j)!=this._lastChildOptions||!e){i.pushSelector("."+this._classSelectorName),i.property("position","relative"),i.property("min-"+this._lengthName,"calc(("+l+") / "+(100-m)+" * 100)"),i.property("overflow","hidden");for(var o=0;o<h.length;o++){var p=h.eq(o),u=j[o];p.addClass(this._className+"-"+o),i.pushSelector("."+this._classSelectorName+">."+this._classSelectorName+"-"+o),"?"!=u.raw&&i.property(this._lengthName,u.css.length),i.property(this._offsetName,u.css.offset),i.property(this._quadratureLengthName,100,"%"),i.property("position","absolute")}g(this._classSelectorName,i.toString()),this._width=this._element.width(),this._height=this._element.height(),this._lastChildOptions=JSON.stringify(j);for(var o=0;o<h.length;o++){var p=h.eq(o);p.k("layout")}this._element.parent()&&e&&this._element.parent().k("layout",!0)}}},a.prototype._layoutByJavascript=function(a){var b=this._element.width(),d=this._element.height(),e=this._width!=b||this._height!=d;if(a||e){for(var h=this._element.find(">div"),i=null,j=[],k=!1,l=0;l<h.length;l++){var m=h.eq(l),n=m.attr("k-ui-stack-"+this._lengthName),o=f(n),p=o[0],q=o[1],r={raw:n,index:l,length:p,unit:q};if(j.push(r),"?"!=n&&"*"!=n&&"px"!=q&&"%*"!=q&&"%"!=q)throw c.createError(0,"k.ui.Stack","Unsupported unit "+r.raw);if("?"==n){k||(i=new c.CssTextBuilder,i.pushSelector("."+this._classSelectorName),i.property("position","relative"),i.pushSelector("."+this._classSelectorName+">*"),i.property("position","absolute"),g(this._classSelectorName,i.toString()),k=!0);var s;m.css("position","relative"),"vertical"==this._direction?s=m[this._lengthName]():(m.css("display","inline-block"),s=m[this._lengthName](),m.css("display","")),m.css("position",""),r.length=s,r.unit="px"}}if(JSON.stringify(j)!=this._lastChildOptions||e){i=new c.CssTextBuilder,i.pushSelector("."+this._classSelectorName),i.property("position","relative"),i.property("overflow","hidden");for(var l=0;l<h.length;l++){var m=h.eq(l),r=j[l];m.addClass(this._classSelectorName+"-"+l),("px"==r.unit||"%"==r.unit)&&(i.pushSelector("."+this._classSelectorName+">."+this._classSelectorName+"-"+l),"?"!=r.raw&&i.property(this._lengthName,r.length,r.unit),i.property(this._quadratureLengthName,100,"%"),i.property("position","absolute"))}g(this._classSelectorName,i.toString());for(var t=0,u=this._element[this._lengthName](),l=0;l<h.length;l++){var m=h.eq(l),r=j[l];("?"==r.raw||"px"==r.unit||"%"==r.unit)&&("px"!=r.unit&&(r.length=m[this._lengthName](),r.unit="px"),t+=r.length)}var v=0;t>u&&(t=u);for(var l=0;l<h.length;l++){var r=j[l];"*"==r.raw?(r.length=u-t,r.unit="px"):"%*"==r.unit&&(r.length=(u-t)*r.length/100,r.unit="px"),r.offset=v,v+=r.length}i=new c.CssTextBuilder,i.pushSelector("."+this._classSelectorName),i.property("position","relative"),i.property("overflow","hidden");for(var l=0;l<h.length;l++){var r=j[l];i.pushSelector("."+this._classSelectorName+">."+this._classSelectorName+"-"+l),"?"!=r.raw&&i.property(this._lengthName,r.length,r.unit),i.property(this._offsetName,r.offset,r.unit),i.property(this._quadratureLengthName,100,"%"),i.property("position","absolute")}g(this._classSelectorName,i.toString()),this._width=this._element.width(),this._height=this._element.height(),this._lastChildOptions=JSON.stringify(j);for(var l=0;l<h.length;l++){var m=h.eq(l);m.k("layout")}this._element.parent()&&e&&this._element.parent().k("layout",!0)}}},a}(),l={},m=new c.DynamicStylesheet("k-"+e());d.fn.extend({k:function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if(0==arguments.length)for(var d=0;d<this.length;d++)j(this.eq(d));else for(var d=0;d<this.length;d++){if(this.eq(d).attr("k-type")){var e=this[d]["k-item"];if(!e)continue;"function"==typeof e[a]?e[a].apply(e,b):console.warn("method "+a+" doesn't exist on the kItem with type "+this.eq(d).attr("k-type"))}break}}})});